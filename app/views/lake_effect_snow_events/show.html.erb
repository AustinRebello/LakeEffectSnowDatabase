<%= render @lake_effect_snow_event %>

<script>

  const allData = document.getElementById("data");
  if(allData != null){
    window.addEventListener("turbo:load", () => showData(1))
  }

  function showData(dataToShow){
    var nam = document.getElementById("NAM");
    var rap = document.getElementById("RAP");
    var met = document.getElementById("METARS");
    var sno = document.getElementById("SnowReports");

    nam.style.display = 'none';
    rap.style.display = 'none';
    met.style.display = 'none';
    sno.style.display = 'none';

    if(dataToShow == 1) {
        nam.style.display = 'block';
        showBufData(6, true)
    } else if (dataToShow == 2){
        rap.style.display = 'block';
        showBufData(6, false)
    } else if (dataToShow == 3){
        met.style.display = 'block';
        showMetData(4)
    } else {
        sno.style.display = 'block'
    }
  }

  function showMetData(dataToShow){
    var cle = document.getElementById("mcle");
    var eri = document.getElementById("meri");
    var gkj = document.getElementById("mgkj");
    var bkl = document.getElementById("mbkl");
    var cgf = document.getElementById("mcgf");
    var lnn = document.getElementById("mlnn");
    var hzy = document.getElementById("mhzy");
    var yng = document.getElementById("myng");
    var pov = document.getElementById("mpov");
    var akr = document.getElementById("makr");
    var cak = document.getElementById("mcak");
    var lpr = document.getElementById("mlpr");
    var all = document.getElementById("mall")

    cle.style.display = 'none';
    eri.style.display = 'none';
    gkj.style.display = 'none';
    bkl.style.display = 'none';
    cgf.style.display = 'none';
    lnn.style.display = 'none';
    hzy.style.display = 'none';
    yng.style.display = 'none';
    pov.style.display = 'none';
    akr.style.display = 'none';
    cak.style.display = 'none';
    lpr.style.display = 'none';
    all.style.display = 'none';

    if(dataToShow == 1) {
      cle.style.display = null;
    } else if (dataToShow == 2){
      eri.style.display = null;
    } else if (dataToShow == 3){
      gkj.style.display = null;
    } else if (dataToShow == 4){
      bkl.style.display = null;
    } else if (dataToShow == 5){
      cgf.style.display = null;
    } else if (dataToShow == 6){
      lnn.style.display = null;
    } else if (dataToShow == 7){
      hzy.style.display = null;
    } else if (dataToShow == 8){
      yng.style.display = null;
    } else if (dataToShow == 9){
      pov.style.display = null;
    } else if (dataToShow == 10){
      akr.style.display = null;
    } else if (dataToShow == 11){
      cak.style.display = null;
    } else if (dataToShow == 12){
      lpr.style.display = null;
    } else {
      all.style.display = null;
    }
  }

  function showBufData(dataToShow, flag){
    if(flag){
      var kcle = document.getElementById("nkcle");
      var keri = document.getElementById("nkeri");
      var kgkl = document.getElementById("nkgkl");
      var le1 = document.getElementById("nle1");
      var le2 = document.getElementById("nle2");
      var all = document.getElementById("nall")
      
    } else {
      var kcle = document.getElementById("rkcle");
      var keri = document.getElementById("rkeri");
      var kgkl = document.getElementById("rkgkl");
      var le1 = document.getElementById("rle1");
      var le2 = document.getElementById("rle2");
      var all = document.getElementById("rall");
    }
    


    kcle.style.display = 'none';
    keri.style.display = 'none';
    kgkl.style.display = 'none';
    le1.style.display = 'none';
    le2.style.display = 'none';
    all.style.display = 'none';

    if(dataToShow == 1) {
      kcle.style.display = null;
    } else if (dataToShow == 2){
      keri.style.display = null;
    } else if (dataToShow == 3){
      kgkl.style.display = null;
    } else if (dataToShow == 4){
      le1.style.display = null;
    } else if (dataToShow == 5){
      le2.style.display = null;
    } else {
      all.style.display = null;
    }
  }
</script>

<p class = "text-center">Personal Reminder to re-format these buttons to be cleaner</p>

<div class="p-1 text-center">
  <%= link_to "Back to all events", lake_effect_snow_events_path, class:"btn btn-secondary" %>
  <%= link_to "Edit", edit_lake_effect_snow_event_path(@lake_effect_snow_event), class:"btn btn-primary", data: { turbo_method: :get, turbo_confirm: 'This will delete all current BUFKIT and METARs data for this event. Are you sure you wish to edit?'} %>
  <%= button_to "Delete this event", @lake_effect_snow_event, method: :delete, class:"btn btn-danger", data: {turbo_method: :get, turbo_confirm: "This will permanently delete this event and all associated data. Are you sure you wish to delete?"}, form: {style: 'display:inline-block;'} %>
</div>

<div class = "p-1 text-center">
  <%= link_to "Radar Loop for This Event", @radarURL, :target => '_blank', class:"btn btn-primary"%>
  <%= link_to "Snow Report Map for This Event", @snowfallURL, :target => '_blank', class:"btn btn-primary"%>
</div>

<div class = "p-1 text-center">
  <%= link_to "Buffalo Atmospheric Sounding Gif", @buffaloURL, :target => '_blank', class:"btn btn-primary"%>
  <%= link_to "Detroit Atmospheric Sounding Gif", @detroitURL, :target => '_blank', class:"btn btn-primary"%>
</div>

<div class = "p-1 text-center">
  <%= link_to "Surface Analysis for Event Start", @surfaceAnalysisURL, :target => '_blank', class:"btn btn-primary"%>
  <%= link_to "Upper Air Analysis for Event Start and End", @upperAirAnalysisURL, :target => '_blank', class:"btn btn-primary" %>
</div>

<div class = "p-1 text-center">
  <% if @event.tecOne.length > 1 %>
    <%= link_to @event.tecOne, @vtecURL1, :target => '_blank', class:"btn btn-primary" %>
  <% end %>
  <% if @event.tecTwo.length > 1 %>
    <%= link_to @event.tecTwo, @vtecURL2, :target => '_blank', class:"btn btn-primary" %>
  <% end %>
  <% if @event.tecThree.length > 1 %>
    <%= link_to @event.tecThree, @vtecURL3, :target => '_blank', class:"btn btn-primary" %>
  <% end %>
  <% if @event.tecFour.length > 1 %>
    <%= link_to @event.tecFour, @vtecURL4, :target => '_blank', class:"btn btn-primary" %>
  <% end %>
</div>

<div id="dFields" class="pb-4 pt-4">
  <ul class="nav nav-tabs nav-fill">
    <li class="nav-item">
      <%= button_tag  'NAM Data', id:"nam", class:"nav-link link-dark", :onclick => "showData(1)" %>
    </li>
    <li class="nav-item">
      <%= button_tag  'RAP Data', id:"rap", class:"nav-link link-dark", :onclick => "showData(2)" %>
    </li>
    <li class="nav-item">
      <%= button_tag  'METAR Data', id:"met", class:"nav-link link-dark", :onclick => "showData(3)" %>
    </li>
    <li class="nav-item">
      <%= button_tag  'Snow Report', id:"sno", class:"nav-link link-dark", :onclick => "showData(4)" %>
    </li>
  </ul>
</div>

<div id = "data">
  <div id="METARS" class="text-center container">
    <div id="mFields" class="pb-4">
      <ul class="nav nav-tabs nav-fill">
        <li class="nav-item">
          <%= button_tag  'CLE', class:"nav-link link-dark", :onclick => "showMetData(1)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'ERI', class:"nav-link link-dark", :onclick => "showMetData(2)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'GKJ', class:"nav-link link-dark", :onclick => "showMetData(3)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'BKL', class:"nav-link link-dark", :onclick => "showMetData(4)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'CGF', class:"nav-link link-dark", :onclick => "showMetData(5)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LNN', class:"nav-link link-dark", :onclick => "showMetData(6)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'HZY', class:"nav-link link-dark", :onclick => "showMetData(7)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'YNG', class:"nav-link link-dark", :onclick => "showMetData(8)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'POV', class:"nav-link link-dark", :onclick => "showMetData(9)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'AKR', class:"nav-link link-dark", :onclick => "showMetData(10)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'CAK', class:"nav-link link-dark", :onclick => "showMetData(11)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LPR', class:"nav-link link-dark", :onclick => "showMetData(12)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'ALL', class:"nav-link link-dark", :onclick => "showMetData(13)" %>
        </li>
      </ul>
    </div>

    <%= link_to 'Generate METAR data', python_metars_url(:event_id => @lake_effect_snow_event.id), class:"btn btn-success", data: { turbo_method: :get, turbo_confirm: 'This will delete all current METAR data for this event. Are you sure you wish to continue?'} %>
    <%= link_to 'Delete METAR data', metar_lake_effect_snow_events_url(:id => @lake_effect_snow_event.id), class:"btn btn-danger", data: { turbo_method: :get, turbo_confirm: 'This will delete all current METAR data for this event. Are you sure you wish to continue?'} %>
    <%= link_to "Export All METAR Data", downloadCSV_metars_url(format: 'csv', event_id: @event.id), class:"btn btn-primary" %>
    
    <table id = "mcle" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarCLE.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "meri" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarERI.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mgkj" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarGKJ.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mbkl" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarBKL.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mcgf" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarCGF.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mlnn" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarLNN.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mhzy" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarHZY.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "myng" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarYNG.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mpov" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarPOV.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "makr" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarAKR.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mcak" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarCAK.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mlpr" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metarLPR.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "mall" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderMet.each do |head| %>
            <th scope="col"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @metars.each do |met| %>
          <tr>
              <% value = 1%>
              <% met.attributes.each do |attr_value| %>
                <% if (value != 1) && (value < 16) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
  <div id="SnowReports" class="text-center container">
    <%= link_to 'Add Snow Report CSV file', file_snow_reports_url(:event_id => @lake_effect_snow_event.id), class:"btn btn-success", data: { turbo_method: :get, turbo_confirm: 'This will delete all snow reports for this event. Are you sure you wish to continue?'} %>
    <%= link_to 'Delete Snow Reports', report_lake_effect_snow_events_url(:id => @lake_effect_snow_event.id), class:"btn btn-danger", data: { turbo_method: :get, turbo_confirm: 'This will delete all snow reports for this event. Are you sure you wish to continue?'} %>
    <%= link_to "Export Snow Report Data", downloadCSV_snow_reports_url(format: 'csv', event_id: @event.id),  class:"btn btn-primary" %>
    <table id = "snowTable"class="table table-striped table-hover table-bordered">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Last Name</th>
        <th scope="col">Town/City</th>
        <th scope="col">Latitude</th>
        <th scope="col">Longitude</th>
        <th scope="col">Storm Total</th>
      </tr>
    </thead>
    <tbody class="table-group-divider">
      <% @snow_reports.each do |report| %>
        <tr>
          <td><%=link_to report.lastName, report %></td>
          <td><%= report.city %></td>
          <td><%= report.latitude %></td>
          <td><%= report.longitude %></td>
          <td><%= report.stormTotal %></td>
       </tr>
      <% end %>
    </tbody>
    </table>
  </div>

  <div id="NAM" class="text-center container">
    <div id="tFields" class="pb-4">
      <ul class="nav nav-tabs nav-fill">
        <li class="nav-item">
          <%= button_tag  'KCLE', class:"nav-link link-dark", :onclick => "showBufData(1, true)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'KERI', class:"nav-link link-dark", :onclick => "showBufData(2, true)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'KGKL', class:"nav-link link-dark", :onclick => "showBufData(3, true)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LE1', class:"nav-link link-dark", :onclick => "showBufData(4, true)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LE2', class:"nav-link link-dark", :onclick => "showBufData(5, true)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'ALL', class:"nav-link link-dark", :onclick => "showBufData(6, true)" %>
        </li>
      </ul>
    </div>

    <%= link_to 'Generate BUFKIT data', python_bufkits_url(:event_id => @lake_effect_snow_event.id), class:"btn btn-success", data: { turbo_method: :get, turbo_confirm: 'This will delete all current BUFKIT data for this event. Are you sure you wish to continue?'} %>
    <%= link_to 'Delete BUFKIT data', bufkit_lake_effect_snow_events_url(:id => @lake_effect_snow_event.id), class:"btn btn-danger", data: { turbo_method: :get, turbo_confirm: 'This will delete all current BUFKIT data for this event. Are you sure you wish to continue?'} %>
    <%= link_to "Export NAM Data", downloadCSV_bufkits_url(format: 'csv', modelType: "NAM", event_id: @event.id), class:"btn btn-primary" %>
    
    <table id = "nkcle" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @namBufCLE.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "nkeri" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
        <tbody class="table-group-divider">
          <% @namBufERI.each do |bufkit| %>
            <tr>
              <% value = 1 %>
              <% bufkit.attributes.each do |attr_value| %>
                <% if (value >1) && (value < 38) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
              <td><%= bufkit.date %></td>
            </tr>
            <tr>
              
          <% end %>
      </tbody>
    </table>

    <table id = "nkgkl" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
        <tbody class="table-group-divider">
          <% @namBufGKJ.each do |bufkit| %>
            <tr>
              <% value = 1 %>
              <% bufkit.attributes.each do |attr_value| %>
                <% if (value >1) && (value < 38) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
              <td><%= bufkit.date %></td>
            </tr>
          <% end %>
      </tbody>
    </table>

    <table id = "nle1" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @namBufLE1.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "nle2" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @namBufLE2.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "nall" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @namBuf.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div id="RAP" class="text-center container">
    <div id="tFields" class="pb-4">
      <ul class="nav nav-tabs nav-fill">
        <li class="nav-item">
          <%= button_tag  'KCLE', class:"nav-link link-dark", :onclick => "showBufData(1, false)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'KERI', class:"nav-link link-dark", :onclick => "showBufData(2, false)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'KGKL', class:"nav-link link-dark", :onclick => "showBufData(3, false)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LE1', class:"nav-link link-dark", :onclick => "showBufData(4, false)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'LE2', class:"nav-link link-dark", :onclick => "showBufData(5, false)" %>
        </li>
        <li class="nav-item">
          <%= button_tag  'ALL', class:"nav-link link-dark", :onclick => "showBufData(6, false)" %>
        </li>
      </ul>
    </div>

    <%= link_to 'Generate BUFKIT data', python_bufkits_url(:event_id => @lake_effect_snow_event.id), class:"btn btn-success", data: { turbo_method: :get, turbo_confirm: 'This will delete all current BUFKIT data for this event. Are you sure you wish to continue?'} %>
    <%= link_to 'Delete BUFKIT data', bufkit_lake_effect_snow_events_url(:id => @lake_effect_snow_event.id), class:"btn btn-danger", data: { turbo_method: :get, turbo_confirm: 'This will delete all current BUFKIT data for this event. Are you sure you wish to continue?'} %>
    <%= link_to "Export RAP Data", downloadCSV_bufkits_url(format: 'csv', modelType: "RAP", event_id: @event.id), class: "btn btn-primary" %>
    
    <table id = "rkcle" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @rapBufCLE.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "rkeri" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
        <tbody class="table-group-divider">
          <% @rapBufERI.each do |bufkit| %>
            <tr>
              <% value = 1 %>
              <% bufkit.attributes.each do |attr_value| %>
                <% if (value >1) && (value < 38) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
              <td><%= bufkit.date %></td>
            </tr>
          <% end %>
      </tbody>
    </table>

    <table id = "rkgkl" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
        <tbody class="table-group-divider">
          <% @rapBufGKJ.each do |bufkit| %>
            <tr>
              <% value = 1 %>
              <% bufkit.attributes.each do |attr_value| %>
                <% if (value >1) && (value < 38) %>
                  <td><%= attr_value[1] %></td>
                <% end %>
                <% value = value + 1%>
              <% end %>
              <td><%= bufkit.date %></td>
            </tr>
          <% end %>
      </tbody>
    </table>

    <table id = "rle1" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @rapBufLE1.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "rle2" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @rapBufLE2.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <table id = "rall" class="table table-striped table-hover table-bordered">
      <thead class="thead-dark">
        <tr>
          <% @tableHeaderBuf.each do |head| %>
            <th scope="col" style="writing-mode: vertical-rl;transform: scale(-1,-1)"><%= head %></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @rapBuf.each do |bufkit| %>
          <tr>
            <% value = 1 %>
            <% bufkit.attributes.each do |attr_value| %>
              <% if (value >1) && (value < 38) %>
                <td><%= attr_value[1] %></td>
              <% end %>
              <% value = value + 1%>
            <% end %>
            <td><%= bufkit.date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>

<script>
  $(document).ready(function () {
    showData(1)
    showBufData(6, true)
    if(document.getElementById('rkcle_wrapper')==null){
      $('#rkcle').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rkeri_wrapper')==null){
      $('#rkeri').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rkgkl_wrapper')==null){
      $('#rkgkl').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rle1_wrapper')==null){
      $('#rle1').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rle2_wrapper')==null){
      $('#rle2').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rall_wrapper')==null){
      $('#rall').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('nkcle_wrapper')==null){
      $('#nkcle').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('nkeri_wrapper')==null){
      $('#nkeri').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('rngkl_wrapper')==null){
      $('#nkgkl').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('nle1_wrapper')==null){
      $('#nle1').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('nle2_wrapper')==null){
      $('#nle2').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('nall_wrapper')==null){
      $('#nall').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mcle_wrapper')==null){
      $('#mcle').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('meri_wrapper')==null){
      $('#meri').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mgkj_wrapper')==null){
      $('#mgkj').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mbkl_wrapper')==null){
      $('#mbkl').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mcgf_wrapper')==null){
      $('#mcgf').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mlnn_wrapper')==null){
      $('#mlnn').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mhzy_wrapper')==null){
      $('#mhzy').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('myng_wrapper')==null){
      $('#myng').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mpov_wrapper')==null){
      $('#mpov').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('makr_wrapper')==null){
      $('#makr').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mcak_wrapper')==null){
      $('#mcak').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mlpr_wrapper')==null){
      $('#mlpr').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('mall_wrapper')==null){
      $('#mall').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
    if(document.getElementById('snowTable_wrapper')==null){
      $('#snowTable').dataTable({
        paging: false,
        searching: false,
        "bInfo": false
      });
      $('.dataTables_length').addClass('bs-select');
    }
  });
</script>
